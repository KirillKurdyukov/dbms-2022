start transaction isolation level read committed read only;
-- Параллельно исполняются только процедуры, как было сказано на практике.
-- Режим read only потому что в freeseats идет только чтение.
-- Косая запись нам не грозит, так как мы только читаем.
-- В процессе процедуры мы фиксируем время и проходим первое read условие
-- о существовании не улетевшего самолета - это происходит атомарно.
-- Далее мы снова атомарно читаем актуальные места у этого перелета.
-- Фантомная запись / непроверяемое чтение нам не грозит,
-- так как процедуры удаление / обновления перелета у нас нет, и Seats читается атомарно.
-- Устареть перелет в момент транзакции не может.
-- Был велик соблазн понизить уровень транзакции до read uncommitted.
-- Так как явных rollback'ов нет и insert'ы происходят в конце,
-- и казалось бы если insert удачный мы прочитаем его как "грязные данные",
-- и транзакция завершится удачно. Но никаких строгих гарантий нет поэтому - read committed.
